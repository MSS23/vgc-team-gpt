openapi: 3.1.0
info:
  title: VGC Team Finder API
  description: |
    Search 6000+ competitive Pokemon VGC teams across 8 regulations (J, I, H, G, F, E, D, C).
    Find rental codes, check Pokemon usage statistics, discover teammates, and get team building inspiration.
  version: 2.0.0
servers:
  - url: https://vgc-team-gpt.onrender.com
paths:
  /api/search:
    get:
      operationId: searchTeams
      summary: Search VGC teams
      description: |
        Search for teams by Pokemon, player name, event, or item.
        Use "and" to combine multiple Pokemon (e.g., "Incineroar and Flutter Mane").
        Filter by regulation to find teams from a specific format.
        The current competitive VGC format is Regulation F - use this by default.
      parameters:
        - name: query
          in: query
          required: true
          schema:
            type: string
          description: Search query - Pokemon names, player, event, item. Use "and" for multiple terms.
          example: "Incineroar and Flutter Mane"
        - name: regulation
          in: query
          schema:
            type: string
            enum: [J, I, H, G, F, E, D, C]
          description: Filter by regulation (F is current VGC, J is Battle Stadium)
        - name: placement
          in: query
          schema:
            type: string
            enum: [1st, top4, top8, top16, top32]
          description: Filter by tournament placement (1st=winners only, top4=1st-4th, etc.)
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
            maximum: 100
          description: Number of results to return
      responses:
        '200':
          description: List of matching teams
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeamSearchResponse'
  /api/random:
    get:
      operationId: getRandomTeam
      summary: Get a random VGC team
      description: Get a random team for inspiration. Filter by Pokemon or regulation.
      parameters:
        - name: pokemon
          in: query
          schema:
            type: string
          description: Filter to teams with this Pokemon
        - name: regulation
          in: query
          schema:
            type: string
            enum: [J, I, H, G, F, E, D, C]
          description: Filter by regulation
      responses:
        '200':
          description: A random team
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SingleTeamResponse'
  /api/rental/{code}:
    get:
      operationId: getRentalTeam
      summary: Look up a team by rental code
      description: Find a specific team using its 6-character rental code.
      parameters:
        - name: code
          in: path
          required: true
          schema:
            type: string
          description: The 6-character rental code
          example: "HFFP8T"
      responses:
        '200':
          description: The team with that rental code
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SingleTeamResponse'
  /api/usage:
    get:
      operationId: getPokemonUsage
      summary: Get Pokemon usage statistics
      description: Shows the most popular Pokemon across all teams. Filter by regulation.
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
            maximum: 100
          description: Number of Pokemon to show
        - name: regulation
          in: query
          schema:
            type: string
            enum: [J, I, H, G, F, E, D, C]
          description: Filter by regulation
      responses:
        '200':
          description: Usage statistics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UsageResponse'
  /api/rentals:
    get:
      operationId: getRentalTeams
      summary: Get teams with rental codes
      description: Find teams that have rental codes available for immediate use in-game.
      parameters:
        - name: pokemon
          in: query
          schema:
            type: string
          description: Filter to rental teams with this Pokemon
        - name: regulation
          in: query
          schema:
            type: string
            enum: [J, I, H, G, F, E, D, C]
          description: Filter by regulation
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
            maximum: 100
          description: Number of results
      responses:
        '200':
          description: List of rental teams
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeamSearchResponse'
  /api/regulations:
    get:
      operationId: getRegulations
      summary: Get available regulations
      description: List all available regulations and team counts for each.
      responses:
        '200':
          description: Regulation information
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RegulationsResponse'
  /api/teammates/{pokemon}:
    get:
      operationId: getPokemonTeammates
      summary: Get common teammates for a Pokemon
      description: Find the most common Pokemon paired with the specified Pokemon.
      parameters:
        - name: pokemon
          in: path
          required: true
          schema:
            type: string
          description: Pokemon name to find teammates for
          example: "Incineroar"
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
            maximum: 20
          description: Number of teammates to show
      responses:
        '200':
          description: List of common teammates
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeammatesResponse'
  /api/items/{pokemon}:
    get:
      operationId: getPokemonItems
      summary: Get common items for a Pokemon
      description: Find the most common held items used on the specified Pokemon.
      parameters:
        - name: pokemon
          in: path
          required: true
          schema:
            type: string
          description: Pokemon name
          example: "Flutter Mane"
      responses:
        '200':
          description: List of common items
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ItemsResponse'
  /api/player/{name}:
    get:
      operationId: getPlayerTeams
      summary: Get teams by player
      description: Find all teams from a specific player.
      parameters:
        - name: name
          in: path
          required: true
          schema:
            type: string
          description: Player name to search for
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
            maximum: 50
          description: Number of results
      responses:
        '200':
          description: Player's teams
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeamSearchResponse'
  /api/recommend:
    get:
      operationId: recommendTeams
      summary: Get team recommendations based on playstyle
      description: |
        Describe your playstyle preferences or Pokemon you enjoy, and get matching team recommendations.
        Examples: "I like hyper offense", "trick room teams", "teams with Entei and Ogerpon"
      parameters:
        - name: q
          in: query
          required: true
          schema:
            type: string
          description: Describe your playstyle (e.g., "hyper offense", "rain teams") or Pokemon you enjoy
          example: "I like hyper offense"
        - name: regulation
          in: query
          schema:
            type: string
            enum: [J, I, H, G, F, E, D, C]
          description: Filter by regulation
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
            maximum: 50
          description: Number of recommendations
      responses:
        '200':
          description: Team recommendations
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecommendResponse'
  /api/moves/{pokemon}:
    get:
      operationId: getMoveUsage
      summary: Get most common moves for a Pokemon
      description: |
        Shows the most common moves used on a Pokemon based on tournament team data.
        Analyzes Pokepaste data from recent teams to show move usage percentages.
      parameters:
        - name: pokemon
          in: path
          required: true
          schema:
            type: string
          description: Pokemon name
          example: "Incineroar"
        - name: regulation
          in: query
          schema:
            type: string
            enum: [J, I, H, G, F, E, D, C]
          description: Filter by regulation (default F)
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
            maximum: 20
          description: Number of moves to show
      responses:
        '200':
          description: Move usage statistics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MoveUsageResponse'
  /api/spreads/{pokemon}:
    get:
      operationId: getCommonSpreads
      summary: Get most common EV spreads for a Pokemon
      description: |
        Shows the most common EV spreads and natures used on a Pokemon.
        Analyzes Pokepaste data to show popular stat distributions.
      parameters:
        - name: pokemon
          in: path
          required: true
          schema:
            type: string
          description: Pokemon name
          example: "Flutter Mane"
        - name: regulation
          in: query
          schema:
            type: string
            enum: [J, I, H, G, F, E, D, C]
          description: Filter by regulation (default F)
        - name: limit
          in: query
          schema:
            type: integer
            default: 5
            maximum: 10
          description: Number of spreads to show
      responses:
        '200':
          description: EV spread statistics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpreadUsageResponse'
  /api/tera/{pokemon}:
    get:
      operationId: getTeraUsage
      summary: Get most common Tera types for a Pokemon
      description: |
        Shows the most common Tera types used on a Pokemon.
        Analyzes Pokepaste data to show Tera type distribution.
      parameters:
        - name: pokemon
          in: path
          required: true
          schema:
            type: string
          description: Pokemon name
          example: "Raging Bolt"
        - name: regulation
          in: query
          schema:
            type: string
            enum: [J, I, H, G, F, E, D, C]
          description: Filter by regulation (default F)
      responses:
        '200':
          description: Tera type statistics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeraUsageResponse'
  /api/leads:
    get:
      operationId: getCommonLeads
      summary: Get common lead combinations
      description: |
        Shows the most common lead Pokemon pairs in tournament teams.
        Based on team slot positions (first two Pokemon listed).
      parameters:
        - name: pokemon
          in: query
          schema:
            type: string
          description: Optional - show leads that include this Pokemon
          example: "Incineroar"
        - name: regulation
          in: query
          schema:
            type: string
            enum: [J, I, H, G, F, E, D, C]
          description: Filter by regulation (default F)
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
            maximum: 20
          description: Number of lead pairs to show
      responses:
        '200':
          description: Lead combination statistics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LeadsResponse'
  /api/abilities/{pokemon}:
    get:
      operationId: getAbilityUsage
      summary: Get ability usage for a Pokemon
      description: |
        Shows the ability distribution for a Pokemon.
        Useful for Pokemon with multiple viable ability options.
      parameters:
        - name: pokemon
          in: path
          required: true
          schema:
            type: string
          description: Pokemon name
          example: "Incineroar"
        - name: regulation
          in: query
          schema:
            type: string
            enum: [J, I, H, G, F, E, D, C]
          description: Filter by regulation (default F)
      responses:
        '200':
          description: Ability usage statistics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AbilityUsageResponse'
components:
  schemas:
    Pokemon:
      type: object
      properties:
        name:
          type: string
          description: Pokemon name
        item:
          type: string
          description: Held item
        sprite:
          type: string
          description: URL to Pokemon sprite image
    Team:
      type: object
      properties:
        teamId:
          type: string
        description:
          type: string
        player:
          type: string
        pokemon:
          type: array
          items:
            $ref: '#/components/schemas/Pokemon'
        pokepaste:
          type: string
        rentalCode:
          type: string
        date:
          type: string
        event:
          type: string
        rank:
          type: string
        regulation:
          type: string
          description: VGC regulation (J, I, H, G, F, E, D, C)
    TeamSearchResponse:
      type: object
      properties:
        total:
          type: integer
        teams:
          type: array
          items:
            $ref: '#/components/schemas/Team'
    SingleTeamResponse:
      type: object
      properties:
        team:
          $ref: '#/components/schemas/Team'
    UsageResponse:
      type: object
      properties:
        totalTeams:
          type: integer
        usage:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              count:
                type: integer
              percentage:
                type: string
    RegulationsResponse:
      type: object
      properties:
        totalTeams:
          type: integer
        regulations:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              count:
                type: integer
    TeammatesResponse:
      type: object
      properties:
        pokemon:
          type: string
        totalTeams:
          type: integer
        teammates:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              count:
                type: integer
              percentage:
                type: string
    ItemsResponse:
      type: object
      properties:
        pokemon:
          type: string
        totalCount:
          type: integer
        items:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              count:
                type: integer
              percentage:
                type: string
    RecommendResponse:
      type: object
      properties:
        total:
          type: integer
          description: Number of matching teams
        archetypes:
          type: array
          items:
            type: string
          description: Detected playstyle archetypes from the query
        pokemon:
          type: array
          items:
            type: string
          description: Pokemon mentioned in the query
        teams:
          type: array
          items:
            $ref: '#/components/schemas/Team'
    MoveUsageResponse:
      type: object
      properties:
        pokemon:
          type: string
          description: Pokemon name
        regulation:
          type: string
          description: Regulation filter used
        sampleSize:
          type: integer
          description: Number of teams analyzed
        moves:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
                description: Move name
              count:
                type: integer
                description: Number of occurrences
              percentage:
                type: string
                description: Usage percentage
    SpreadUsageResponse:
      type: object
      properties:
        pokemon:
          type: string
          description: Pokemon name
        regulation:
          type: string
          description: Regulation filter used
        sampleSize:
          type: integer
          description: Number of teams analyzed
        spreads:
          type: array
          items:
            type: object
            properties:
              nature:
                type: string
                description: Nature name
              evs:
                type: string
                description: EV spread (HP/Atk/Def/SpA/SpD/Spe)
              count:
                type: integer
                description: Number of occurrences
              percentage:
                type: string
                description: Usage percentage
    TeraUsageResponse:
      type: object
      properties:
        pokemon:
          type: string
          description: Pokemon name
        regulation:
          type: string
          description: Regulation filter used
        sampleSize:
          type: integer
          description: Number of teams analyzed
        teraTypes:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                description: Tera type name
              count:
                type: integer
                description: Number of occurrences
              percentage:
                type: string
                description: Usage percentage
    LeadsResponse:
      type: object
      properties:
        regulation:
          type: string
          description: Regulation filter used
        filterPokemon:
          type: string
          description: Pokemon filter used (if any)
        totalTeams:
          type: integer
          description: Number of teams analyzed
        leads:
          type: array
          items:
            type: object
            properties:
              pokemon1:
                type: string
                description: First lead Pokemon
              pokemon2:
                type: string
                description: Second lead Pokemon
              count:
                type: integer
                description: Number of occurrences
              percentage:
                type: string
                description: Usage percentage
    AbilityUsageResponse:
      type: object
      properties:
        pokemon:
          type: string
          description: Pokemon name
        regulation:
          type: string
          description: Regulation filter used
        sampleSize:
          type: integer
          description: Number of teams analyzed
        abilities:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
                description: Ability name
              count:
                type: integer
                description: Number of occurrences
              percentage:
                type: string
                description: Usage percentage
